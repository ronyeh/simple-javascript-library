<!DOCTYPE html>
<html lang="en">
    <body>
        <pre id="output"></pre>
        <script>
            function resolveAfter2Seconds() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve("resolved");
                    }, 2000);
                });
            }

            async function asyncCall() {
                const result = await resolveAfter2Seconds();
                console.log(result); // "resolved"
            }

            asyncCall().then(()=> {
                console.log("NOW WE SHOW THE QUERY PARAMS!!!");
                const queryParams = new URLSearchParams(window.location.search);
                const json = JSON.stringify(Object.fromEntries(queryParams), null, 4);
                document.getElementById("output").innerHTML = json;
            });

        </script>
    </body>
</html>
